var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,l)=>{for(var c in l||(l={}))t.call(l,c)&&r(e,c,l[c]);if(a)for(var c of a(l))n.call(l,c)&&r(e,c,l[c]);return e};import{C as c,u as s,L as o,a as i,b as m,c as d,S as u,R as p,B as E,d as b,e as y,P as N}from"./vendor.31e20572.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,l)=>{const c=new URL(e,n);if(self[t].moduleMap[c])return a(self[t].moduleMap[c]);const s=new Blob([`import * as m from '${c}';`,`${t}.moduleMap['${c}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){l(new Error(`Failed to import: ${e}`)),r(o)},onload(){a(self[t].moduleMap[c]),r(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/React--ScenicSpot/assets/");var f={"全部地區":"","臺北市":"Taipei","新北市":"NewTaipei","桃園市":"Taoyuan","臺中市":"Taichung","臺南市":"Tainan","高雄市":"Kaohsiung","基隆市":"Keelung","新竹市":"Hsinchu","新竹縣":"HsinchuCounty","苗栗縣":"MiaoliCounty","彰化縣":"ChanghuaCounty","南投縣":"NantouCounty","雲林縣":"YunlinCounty","嘉義縣":"ChiayiCounty","嘉義市":"Chiayi","屏東縣":"PingtungCounty","宜蘭縣":"YilanCounty","花蓮縣":"HualienCounty","臺東縣":"TaitungCounty","金門縣":"KinmenCounty","澎湖縣":"PenghuCounty","連江縣":"LienchiangCounty"};const g=c.memo((()=>{let[e,t]=c.useState([]);const a=s((e=>e.city));return c.useEffect((()=>{let e=[];Object.keys(f).forEach((t=>{let n,r=f[t];n=" "!=r&&r?c.createElement("li",{key:t},c.createElement(o,{to:r,className:"dropdown-item "+(a==r?"active":""),href:"#"},t)):c.createElement("li",{key:t},c.createElement(o,{to:"/React--ScenicSpot/",className:"dropdown-item "+(a==r?"active":""),href:"#"},t)),e.push(n)})),t(e)}),[a]),c.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light sticky-top"},c.createElement("div",{className:"container"},c.createElement("a",{className:"navbar-brand",href:"#"},"Navbar"),c.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},c.createElement("span",{className:"navbar-toggler-icon"})),c.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},c.createElement("ul",{className:"navbar-nav  ms-auto mb-2 mb-lg-0"},c.createElement("div",{className:"dropdown"},c.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},"切換各縣市"),c.createElement("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},e))))))}));const C=c.memo((()=>c.createElement("header",{className:""},c.createElement("div",{className:"container-fluid border-bottom border-secondary border-5 rounded"},c.createElement("div",{className:"container"},c.createElement("img",{src:"/React--ScenicSpot/assets/Let’sTravel.aa8cf5d8.png",className:"",alt:"logo"})))))),v=e=>({type:"API_ADD_DATA",newData:e}),h=e=>({type:"CHANGE_CITY_TO_INIT_ALL_STATE",city:e}),w=c.memo((e=>{const t=i();let a=[];return e.tag.forEach(((e,t)=>{let n=function(e){switch(!0){case"尚未分類"==e:return"none";case"國家風景區類"==e:return"1";case"自然風景類"==e:return"2";case"藝術類"==e:return"3";case"生態類"==e:return"4";case"文化類"==e:return"5";default:return"none"}}(e);a.push(c.createElement("div",{className:`tag bg-tag-${n}`,key:t},c.createElement("p",null,e)))})),c.createElement("li",{className:"ticketCard col-4",onClick:function(){t({type:"CALL_MODAL_DATA",dataIndex:e.index})},"data-bs-toggle":"modal","data-bs-target":"#cardModal"},c.createElement("div",{className:"ticketCard-img"},c.createElement("a",{href:"#"},c.createElement("img",{className:"img-fluid",src:e.url,alt:e.alt})),c.createElement("div",{className:"tagContainer"},a)),c.createElement("div",{className:"ticketCard-content"},c.createElement("div",null,c.createElement("h3",null,c.createElement("a",{href:"#",className:"ticketCard-name"},e.name)),c.createElement("p",{className:"ticketCard-description"},e.description)),c.createElement("div",{className:"d-flex justify-content-between"},c.createElement("p",{className:"text-secondary"},e.town),c.createElement("p",{className:"text-dark pointer"},"(點擊卡片以查看更多)"))))}));var S="/React--ScenicSpot/assets/replaceImg.38489ecb.jpg";const _=c.memo((()=>{const e=i();let[t,a]=c.useState(!1);const{url:n,preCity:r,city:l,skipNum:o,scenicSpots:u}=s((e=>e)),p=d().pathname.split("/"),E=p[p.length-1];c.useEffect((()=>{if(E)e(h(E));else{if(""==r&&""==l)return;e(h(""))}}),[E]),c.useEffect((async()=>{if(""==n)return;let t=await function(e){return new Promise(((t,a)=>{m(e).then((e=>{t(e.data)})).catch((e=>{console.log(`Error: ${e}`),a()}))}))}(n);t.length?r!=l?(e(v(t)),e({type:"CHANGE_PRE_CITY"})):e(v(t)):a(!0)}),[n]);const b=c.memo((e=>{const{data:t}=e;let a=[];return t.forEach(((e,t)=>{const{description:n,tags:r,town:l,img:s}=function(e){return{description:e.Description?`${e.Description.slice(0,70)}...`:e.DescriptionDetail?`${e.DescriptionDetail.slice(0,70)}...`:"尚未有更多描述",tags:(()=>{if(e.Class1){let t=[];return t.push(e.Class1),e.Class2&&t.push(e.Class2),e.Class3&&t.push(e.Class3),Array.from(new Set(t)).sort((function(e,t){return t.length-e.length}))}return["尚未分類"]})(),town:e.City?e.City:e.Address.slice(0,3),img:e.Picture.PictureUrl1?e.Picture.PictureUrl1:S}}(e);a.push(c.createElement(w,{key:e.ID,name:e.Name,description:n,alt:e.Picture.PictureDescription1,url:s,tag:r,town:l,index:t+o}))})),a}));return c.createElement("section",{className:"container"},c.createElement("ul",{className:"ticketCard-area row g-0 list-unstyled"},c.createElement(b,{data:u})),t&&c.createElement("p",{className:"h1 text-center my-5 py-5"},"Gone. It's all gone."))})),T=c.memo((()=>{const e=s((e=>e.scenicSpots)),t=s((e=>e.modalDataIndex));let[a,n]=c.useState({Name:""});return c.useEffect((()=>{void 0!==t&&n(e[t])}),[t]),c.createElement("div",null,c.createElement("div",{className:"modal fade",id:"cardModal",tabIndex:"-1","aria-labelledby":"cardModalLabel","aria-hidden":"true"},c.createElement("div",{className:"modal-dialog modal-lg"},c.createElement("div",{className:"modal-content"},c.createElement("div",{className:"modal-header"},c.createElement("h5",{className:"modal-title fs-2 fw-bold",id:"cardModalLabel"},a.Name),c.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),c.createElement("div",{className:"modal-body text-dark"},c.createElement("img",{src:"Picture"in a&&"PictureUrl1"in a.Picture?a.Picture.PictureUrl1:S,alt:"",className:"figure-img img-fluid rounded d-block mx-auto pb-2"}),c.createElement("p",null,c.createElement("span",{className:"fw-bolder fs-4"},"詳細介紹:")," ",c.createElement("br",null),a.DescriptionDetail),c.createElement("p",null,c.createElement("span",{className:"fw-bolder fs-4"},"地址:")," ",a.Address),c.createElement("p",null,c.createElement("span",{className:"fw-bolder fs-4"},"費用:")," ",a.TicketInfo),c.createElement("p",null,c.createElement("span",{className:"fw-bolder fs-4"},"開放時間:")," ",a.OpenTime)),c.createElement("div",{className:"modal-footer"},c.createElement("button",{type:"button",className:"btn ","data-bs-dismiss":"modal"},"Close"))))))})),D=c.memo((()=>c.createElement("div",{className:"bg-light py-5"},c.createElement(T,null),c.createElement(u,null,c.createElement(p,{key:"index",path:":cityName",render:()=>c.createElement(_,null)}),c.createElement(p,{key:"firstPage",path:"/",component:()=>c.createElement(_,null)})))));function k(){return(()=>{const e=i(),[t,a]=c.useState(!1);c.useEffect((()=>{const e=e=>{if(e.target.documentElement.getBoundingClientRect().bottom<500)return;const t=e.target.documentElement.getBoundingClientRect().bottom<=window.innerHeight+5;a(t)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),c.useEffect((()=>{!1!==t&&(e({type:"ADD_SKIP_NUM"}),e({type:"SET_URL"}))}),[t])})(),c.createElement(E,null,c.createElement("div",{className:"App"},c.createElement(g,null),c.createElement(C,{className:""}),c.createElement("main",{className:"mb-5"},c.createElement(D,null))))}const O={scenicSpots:[],skipNum:0,preCity:"",city:"",url:"https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$top=30&$skip=0&$format=JSON",modalDataIndex:void 0};const A=b(((e=O,t)=>{switch(t.type){case"API_ADD_DATA":let a;return a=e.city!=e.preCity?t.newData:e.scenicSpots.concat(t.newData),l(l({},e),{scenicSpots:a});case"ADD_SKIP_NUM":return l(l({},e),{skipNum:e.skipNum+30});case"CHANGE_PRE_CITY":return l(l({},e),{preCity:e.city});case"CHANGE_CITY_TO_INIT_ALL_STATE":let n;return t.city&&" "!=t.city||(n="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$top=30&$skip=0&$format=JSON"),n=`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/${t.city}?$top=30&$skip=0&$format=JSON`,l(l({},e),{url:n,scenicSpots:[],skipNum:0,city:t.city});case"SET_URL":return e.city?l(l({},e),{url:`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/${e.city}?$top=30&$skip=${e.skipNum}&$format=JSON`}):l(l({},e),{url:`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$top=30&$skip=${e.skipNum}&$format=JSON`});case"CALL_MODAL_DATA":return l(l({},e),{modalDataIndex:t.dataIndex});default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());y.render(c.createElement(N,{store:A},c.createElement(c.StrictMode,null,c.createElement(k,null))),document.getElementById("root"));
